<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
		<title>Svalbardkartet IFrame Designer</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
		<link rel="stylesheet" type="text/css" href="http://geodata.npolar.no/arcgis_js_api/library/3.8/3.8/js/dojo/dijit/themes/claro/claro.css">
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<link rel="stylesheet" type="text/css" href="http://geodata.npolar.no/arcgis_js_api/library/3.8/3.8/js/esri/css/esri.css" />
		<link rel="stylesheet" type="text/css" href="modules/css/agsjs.css" />
		  <style>
  .ui-autocomplete-loading {
    background: white url('http://jqueryui.com/resources/demos/autocomplete/images/ui-anim_basic_16x16.gif') right center no-repeat;
  }
  #search { width: 25em; }
  </style>
		</head>
	<body class="claro">
		<div id="content" data-dojo-type="dijit.layout.BorderContainer" design="headline" gutters="false" style="width: 100%; height: 100%; margin: 0;">
		
			<div data-dojo-type="dojox.layout.ExpandoPane" title = "Map Layers" data-dojo-props="duration:300, region:'left', maxWidth:'280px'" style="width:280px;" splitter="true">
				<div id="tocDiv"></div>
			</div>
			<div id="map" data-dojo-type="dijit.layout.ContentPane" region="center" style="padding:0px">
				<div id="copyright">Â© <a href="http://npolar.no" target="_blank">Norsk Polarinstitutt</a></div>
			</div>

			<!--Parameters section
				-->
	
    <div id="showhide" onclick="showhide();" title="Show/hide panel" onmouseover="this.style.cursor='pointer'"></div>
				<div class="param" id="paramDiv">
						<strong>Embed Map in Website</strong>
						<p>Select a layers to overlay and navigate to the desired map section.</p>

					<div class="navigationdiv">
						<!--Create static map (disable zooming and panning)-->
						Enable map zooming using mouse scroll wheel.
						<input id="rbLockedYes" name="rbLocked" type="radio" value="0" checked/>
						Yes
						<input id="rbLockedNo" name="rbLocked" type="radio" value="1"/>
						No.
					</div>
					<br />
						<!-- iframecomposer -->
					<div id="iframecomposer">
						<div class="editorToolsDiv">
							<button class="btn btn-primary btn-xs tip" id="drawPoint" tip="Draw point on map"></button>
							<button class="btn btn-primary btn-xs tip" id="drawPolyline" tip = "Draw polyline on map"></button>
							<button class="btn btn-primary btn-xs tip" id="drawExtent" tip="Draw rectangle on map"></button>
							<button class="btn btn-primary btn-xs tip" id="drawCircle" tip="Draw circle on map"></button>
							<button class="btn btn-primary btn-xs tip" id="drawText" tip="Add text label to map"></button>
							<button class="btn btn-primary tip" id="undo" disabled="true"  onclick="undoManager.undo(); undo_click();" showLabel="false" iconClass="undoIcon" tip="Undo previous drawing"></button>
							<button class="btn btn-primary tip" id="btnRemoveMarker" tip="Clear all drawings" disabled="disabled"></button>
							<!-- Color picker-->
							<input type='text' id="colorpicker" name="colorpicker" value="#ff0000" title= "Choose Color"/><!-- /. color picker-->
						</div>

						<form class="form-inline" id="iframetitlediv" name="iframetitleform">
							<input class="input-sm" id="iframetitleinput"  name="iframetitletext" value="" placeholder="Text" title="Title" type="text" style="width:120px; font-size: 11px;" /><span class="alert-info alert-message fade">Add text label here</span>
							</form>
						<form class="form-inline" id="iframeinfodiv" name="iframeinfoform">
							<textarea id="iframeinfoinput" name="iframeinfotext"  value="" placeholder="Add text info to graphic here." title="Info" spellcheck="false" style="z-index:99; width:160px; font-size: 11px;"></textarea>
						</form>
						<div class="pointcoordinates"><div id="utm33Ncoords"></div><div id="wgs84coords"></div>
					</div>
				</div> <!-- /.iframecomposer -->
					<br />
					<div id="embedSize-box">
						<div class="widthdiv input-prepend input-append">
							<span class="add-on"> Width:</span><input id="txtWidth" type="text" class="input-mini textright" placeholder="width" value="500" /><span class="add-on">px</span>
							</div>
						<div class="heightdiv input-prepend input-append">
							<span class="add-on"> Height:</span><input id="txtHeight" type="text" class="input-mini textright" placeholder="height" value="500" /><span class="add-on">px</span>
							</div>
					</div>
					<div id="codeDiv">
						<div class="code" id="divCode"></div>
						<div class="codefooter">
							Copy and paste above HTML code to embed on a website.
						</div>
						<div class="previewdiv">
							<button class="btn btn-primary" id="btnGenerateCode">Update Code</button>
							<button class="btn btn-primary tip" tip="Opens in new page" id="btnExamplePage">Preview</button>
						</div>
							<div class="search input" id="search">
							<form action="" method="get">
							<input id="search-input" type="search" placeholder="zoom to placename..." value="" />
							</form>
							</div>	
					</div>
				</div>

			</div>
			<!--end parameters section
		</div>
		-->

		<script type="text/javascript">
            var dojoConfig = {
                parseOnLoad : true,
                packages : [{
                	"name" : "agsjs",
                    "location" : location.pathname.replace(/\/[^/]+$/, '') + '/modules'
                },
                {
                	"name": "modules",
                	"location": location.pathname.replace(/\/[^/]+$/, "") + "/modules"
                	}
                ]
            };

		</script> 
		
		<script type="text/javascript" src="js/proj4js.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
		<script type="text/javascript" src="js/spectrum.js"></script>
		<link rel="stylesheet" type="text/css" href="css/spectrum.css" />

		<script src="http://geodata.npolar.no/arcgis_js_api/library/3.8/3.8/init.js"></script>
		<script type="text/javascript" src="js/main.js"> </script>


<script>
    
   $(function() {
    function log( message ) {
      $( "<div>" ).text( message ).prependTo( "#log" );
      $( "#log" ).scrollTop( 0 );
    }

    $( "#search-input" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: "http://placenames.npolar.no/stadnamn/edge/",
          dataType: "jsonp",
          data: {
            q: request.term,
            approved: true,
            rows: 5,
            region: "Svalbard"
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.title + " (" + item.terrain + ")",
                value: item.title,
                object: item
              };
            }));
          }
        });
      },
      minLength: 2,
      select: function( event, ui ) {
           WGS84ToUTM33(ui.item.object);
            addMarker(position);
      },
      open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
    });
  });


$("#colorpicker").spectrum({
    color: "#ff0000",
    //showButtons: false,
});
$('#iframetitleinput').keypress(function(e){
    if ( e.which == 13 ) return false;
    //or...
    if ( e.which == 13 ) e.preventDefault();
});
$('#search-input').keypress(function(e){
    if ( e.which == 13 ) return false;
    //or...
    if ( e.which == 13 ) e.preventDefault();
});
</script>
	</body>
</html>
