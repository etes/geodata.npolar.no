<!DOCTYPE html>
<html lang ="en" itemscope="" itemtype="http://schema.org/WebPage">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Cryoclim</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
        <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.8/js/dojo/dojo/resources/dojo.css">
        <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.8/js/esri/css/esri.css">
        <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap-glyphicons.css" />
        <link rel="stylesheet" type="text/css" href="css/main.css">
    </head>
    <body class="dbootstrap">
        <div class="appHeader">
            <div class="headerLogo">
                <img src="images/np-logo.png"/>
            </div>
            <div class="headerTitle">
                Glaciers in Svalbard
                <div class="subHeaderTitle">
                    by Cryoclim and the Norwegian Polar Institute
                </div>
            </div>
            
            <div class="identify-tools">
            <a class="button tip lightblue identify icon-info-sign icon-large" title="Point identify" href="#" id="point-identify" tip="identify"></a>
            </div>
            <div class="search">
                <!--<div id='geocodeDijit'>
                </div>
                <div id="placenameDijit"></div>-->
                
                <div id="placenameDijit">
                </div>
                <!--<form action="" method="get">
				<input id="search-input" type="search" placeholder="placename coming..." value="" rel="search"/>
				</form>-->
            </div>
            <div class="headerLinks">
                <div style="text-align:right;">
                    <!--<a id="helpA" href="#">Help</a>-->
                </div>
            </div>
        </div>
        <div id="sidebarCollapseButton" class="sidebarCollapseButton close" style="display:none;">
        </div>
        <script type="text/javascript">
            var dojoConfig = {
                async: true,
                packages: [{
                    name: "viewer",
                    location: location.pathname.replace(/[^\/]+$/, '') + "js/viewer"
                },{
                    name: "gis",
                    location: location.pathname.replace(/[^\/]+$/, '') + "js/gis"
                },{
                    name: "dbootstrap",
                    location: location.pathname.replace(/[^\/]+$/, '') + "js/dbootstrap"
                },{
                    name: "xstyle",
                    location: location.pathname.replace(/[^\/]+$/, '') + "js/dbootstrap"
                }]
            };
        </script>
        <script src="//js.arcgis.com/3.8"></script>
        <script type="text/javascript" src="js/proj4js.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
        <script type="text/javascript">
            require(['dbootstrap','viewer/Controller'], function(dbootstrap, Controller){
                Controller.startup();
            });
        </script>
        <!--
        <script>
        // PLACENAMES SEARCH
// Create projection definitions
//Proj4js.defs["EPSG:4326"] = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs";
Proj4js.defs["EPSG:32633"] = "+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";

var wgs84 = new Proj4js.Proj('EPSG:4326');
var utm33 = new Proj4js.Proj('EPSG:32633');
var position, graphic;
// transform placename coordinates from wgs84 to utm 33


var placenameGraphic;
// Add point marker to map and zoom to that position


//placenames search using jquery autocomplete
   $(function() {
    $( "#search-input" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          // @ TODO use api.npolar.no
          url: "http://placenames.npolar.no/stadnamn/edge/",
          dataType: "jsonp",
          data: {
            q: request.term,
            approved: true,
            rows: 8,
            hemisphere: "n",
          },
          success: function( data ) {
            response( $.map( data, function( item ) {
              return {
                label: item.title + " (" + item.terrain + ")",
                value: item.title,
                object: item
              };
            }));
          }
        });
      },
      minLength: 1,
      select: function( event, ui ) {
           WGS84ToUTM33(ui.item.object);
           addMarker(position);
      },
      open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
    }).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
           var re = new RegExp("("+$.ui.autocomplete.escapeRegex(this.term)+")", "gi" );
           item.label = item.label.replace(re,"<strong>$1</strong>");
           return $( "<li></li>" )
              .data( "ui-autocomplete-item", item )
              .append( $( "<a></a>" ).html(item.label) )
              .appendTo( ul );
          };
  });

// END PLACENAMES SEARCH
        </script>-->
    </body>
</html>
