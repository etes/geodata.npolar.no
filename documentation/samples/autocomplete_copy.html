<head>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/esri.css" rel="stylesheet" type="text/css" >

</head>
<body>
	<div id = "search" style="margin:10px 10% 0 10%; position: absolute; width: 80%; z-index: 2;">
		<form id="geoname_autocomplete_form" action="" method="get">
			<!--<input name="q" type="search" id="geoname_autocomplete" autofocus="autofocus"  value="" placeholder="Zoom to place name"/>
			<input id="geoname_search_button" type="submit" value="Search">-->
			<input type="search" id="geoname_autocomplete" autofocus="autofocus"  value="" placeholder="Zoom to place name"/>
			<!-- link_to I18n.t("Nullstill") -->
		</form>
	</div>
	<div id="map" style="width:80%; height:256px; border:1px solid #000;"></div>
</body>

<script src="http://yui.yahooapis.com/3.10.1/build/yui/yui-min.js"></script>
<script src="js/proj4js.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.4"></script>
<script src="js/npmaps.js" type="text/javascript"></script>

<script>
    YUI().use("autocomplete", "autocomplete-filters", "autocomplete-highlighters", function(Y) {
        Y.one('body').addClass('yui3-skin-sam');
        var geoname_base = "http://placenames.npolar.no:80";
        // Geoname service URI (JSONP service)
        var geoname_service = geoname_base + "/stadnamn/edge/{query}?callback={callback}&rows=5" + "&approved=true&amp;location=Svalbard&lang=nn";
        var geoname_autocomplete = Y.one('#geoname_autocomplete');
        geoname_autocomplete.plug(Y.Plugin.AutoComplete, {
            resultHighlighter : 'phraseMatch',
            //resultFormatter: simple_geoname_formatter,
            resultTextLocator : 'title',
            source : geoname_service
        });
        geoname_autocomplete.ac.on('select', function(e) {
            geoname(e);
        })
    }); 
</script>

<script type="text/javascript">
    dojo.require("esri.map");

    var map;

    function init() {
        var initialExtent = new esri.geometry.Extent({"xmin": 477423.89,"ymin":8663685.98,"xmax":553624.05,"ymax":8714486.09,"spatialReference":{"wkid":32633}});
        map = new esri.Map("map", {extent: initialExtent, logo : false});
        map.addLayer(new esri.layers.ArcGISTiledMapServiceLayer("http://geodata.npolar.no/ArcGIS/rest/services/inspire1/NP_TopoSvalbard_U33_CHL/MapServer"));
        
        //add graphics for place names to map
        graphicLayer = new esri.layers.GraphicsLayer();
        map.addLayer(graphicLayer);
        graphicLayer.show();
    }


    dojo.addOnLoad(init); 
</script>
